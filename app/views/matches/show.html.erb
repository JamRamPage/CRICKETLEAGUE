<h1><%= @match.hometeam.name %> <%= I18n.t('.matches.scorecard.innings_title') %> </h1>
<p style="text-align:center"><%= if (@homeinnings == nil) then link_to I18n.t('.matches.create_innings'), new_match_innings_path(@match, @homeinnings) end %></p>
<p style="text-align:center"><%= if (@homeinnings != nil) then link_to(I18n.t('.matches.edit_innings'), edit_match_innings_path(@match, @homeinnings)) end %></p>
  <table class="center">
    <thead>
      <tr>
        <th></th>
        <th><%= I18n.t('.matches.scorecard.batsman') %></th>
        <th><%= I18n.t('.matches.scorecard.how_out') %></th>
        <th><%= I18n.t('.matches.scorecard.runs') %></th>
        <th><%= I18n.t('.matches.scorecard.balls') %></th>
        <th><%= I18n.t('.matches.scorecard.fours') %></th>
        <th><%= I18n.t('.matches.scorecard.sixes') %></th>
        <th><%= I18n.t('.matches.scorecard.strike_rate') %></th>
        <th><%= link_to I18n.t('.matches.add_innings'), new_batting_innings_path %></th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @homebattinginnings.each do |batting_innings| %>
        <tr>
          <td><%= batting_innings.batsman_number %></td>
          <td><%= batting_innings.Player.name %></td>
          <td><%= batting_innings.outDescription %></td>
          <td><%= batting_innings.runs %></td>
          <td><%= batting_innings.balls %></td>
          <td><%= batting_innings.fours %></td>
          <td><%= batting_innings.sixes %></td>
          <td><%= ((batting_innings.runs.to_f / batting_innings.balls.to_f) * 100).round(2) %></td>
          <td><%= link_to 'Edit', edit_batting_innings_path(batting_innings) %></td>
          <td><%= link_to 'Destroy', batting_innings, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>homeinnings
      <%
      @homebattinginningses = BattingInnings.joins(:Innings => :match).where("innings.match_id" => @match).where("innings.hometeambatted" => true)
      homescorebattedruns = @homebattinginningses.sum("runs")
      homewides = BowlingInnings.joins(:Innings => :match).where("innings.match_id" => @match).where("innings.hometeambatted" => true).sum("wides")
      homenoballs = BowlingInnings.joins(:Innings => :match).where("innings.match_id" => @match).where("innings.hometeambatted" => true).sum("no_balls")
      homescorebowledextras = homewides + homenoballs
      homescoremiscextras = Innings.joins(:match).where("innings.match_id" => @match).where("innings.hometeambatted" => true).sum("byes + legbyes + penalties")
      homewicketsconceded = @homebattinginningses.where.not(HowOut: 0).where.not(HowOut: 1).count
      homeovers = BowlingInnings.joins(:Innings => :match).where("innings.match_id" => @match).where("innings.hometeambatted" => true).sum("overs")
      %>
      <tr>
        <td>Extras:</td>
        <td></td><td>30(b: <%= if !(@homeinnings==nil) then @homeinnings.byes end %>,lb: <%= if !(@homeinnings==nil) then @homeinnings.legbyes end %>,w:<%= homewides%> ,nb:<%= homenoballs%> ,p:<%= if !(@homeinnings==nil) then @homeinnings.penalties end %>)</td>
      </tr>
      <tr>
        <td><strong>Total:</strong></td>
        <td></td><td><%= homescorebattedruns + homescorebowledextras + homescoremiscextras%><%= if (homewicketsconceded < 10) then '/' end %><%=if (homewicketsconceded < 10) then homewicketsconceded end %> (<%= homeovers%> Overs, RR: <%= ((homescorebattedruns + homescorebowledextras + homescoremiscextras).to_f / homeovers.to_f).round(2)%>)</td>
      </tr>
    </tbody>

  </table>
  <br>
  <table class="center">
    <thead>
      <tr>
        <th><%= I18n.t('.matches.scorecard.bowler') %></th>
        <th><%= I18n.t('.matches.scorecard.overs') %></th>
        <th><%= I18n.t('.matches.scorecard.maidens') %></th>
        <th><%= I18n.t('.matches.scorecard.runs') %></th>
        <th><%= I18n.t('.matches.scorecard.wickets') %></th>
        <th><%= I18n.t('.matches.scorecard.econ') %></th>
        <th><%= I18n.t('.matches.scorecard.no_balls') %></th>
        <th><%= I18n.t('.matches.scorecard.wides') %></th>
        <th><%= link_to I18n.t('.matches.add_innings'), new_bowling_innings_path %></th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @homebowlinginnings.each do |bowling_innings| %>
        <tr>
          <td><%= bowling_innings.Player.name %></td>
          <td><%= bowling_innings.overs %></td>
          <td><%= bowling_innings.maidens %></td>
          <td><%= bowling_innings.runs %></td>
          <td><%= bowling_innings.wickets %></td>
          <td><%= (bowling_innings.runs.to_f / bowling_innings.overs.to_f).round(2) %></td>
          <td><%= bowling_innings.no_balls %></td>
          <td><%= bowling_innings.wides %></td>
          <td><%= link_to 'Edit', edit_bowling_innings_path(bowling_innings) %></td>
          <td><%= link_to 'Destroy', bowling_innings, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<h1><%= @match.awayteam.name %> <%= I18n.t('.matches.scorecard.innings_title') %> </h1>
<p style="text-align:center"><%= if (@awayinnings == nil) then link_to I18n.t('.matches.create_innings'), new_match_innings_path(@match, @awayinnings) end %></p>
<p style="text-align:center"><%= if (@awayinnings != nil) then link_to(I18n.t('.matches.edit_innings'), edit_match_innings_path(@match, @awayinnings)) end %></p>
  <table class="center">
    <thead>
      <tr>
        <th></th>
        <th><%= I18n.t('.matches.scorecard.batsman') %></th>
        <th><%= I18n.t('.matches.scorecard.how_out') %></th>
        <th><%= I18n.t('.matches.scorecard.runs') %></th>
        <th><%= I18n.t('.matches.scorecard.balls') %></th>
        <th><%= I18n.t('.matches.scorecard.fours') %></th>
        <th><%= I18n.t('.matches.scorecard.sixes') %></th>
        <th><%= I18n.t('.matches.scorecard.strike_rate') %></th>
        <th><%= link_to I18n.t('.matches.add_innings'), new_batting_innings_path %></th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @awaybattinginnings.each do |batting_innings| %>
        <tr>
          <td><%= batting_innings.batsman_number %></td>
          <td><%= batting_innings.Player.name %></td>
          <td><%= batting_innings.outDescription %></td>
          <td><%= batting_innings.runs %></td>
          <td><%= batting_innings.balls %></td>
          <td><%= batting_innings.fours %></td>
          <td><%= batting_innings.sixes %></td>
          <td><%= ((batting_innings.runs.to_f / batting_innings.balls.to_f) * 100).round(2) %></td>
          <td><%= link_to 'Edit', edit_batting_innings_path(batting_innings) %></td>
          <td><%= link_to 'Destroy', batting_innings, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
      <%
      @awaybattinginningses = BattingInnings.joins(:Innings => :match).where("innings.match_id" => @match).where("innings.hometeambatted" => false)
      awayscorebattedruns = @awaybattinginningses.sum("runs")
      awaywides = BowlingInnings.joins(:Innings => :match).where("innings.match_id" => @match).where("innings.hometeambatted" => false).sum("wides")
      awaynoballs = BowlingInnings.joins(:Innings => :match).where("innings.match_id" => @match).where("innings.hometeambatted" => false).sum("no_balls")
      awayscorebowledextras = awaywides + awaynoballs
      awayscoremiscextras = Innings.joins(:match).where("innings.match_id" => @match).where("innings.hometeambatted" => false).sum("byes + legbyes + penalties")
      awaywicketsconceded = @awaybattinginningses.where.not(howout: 0).where.not(howout: 1).count
      awayovers = BowlingInnings.joins(:Innings => :match).where("innings.match_id" => @match).where("innings.hometeambatted" => false).sum("overs")
      %>
      <tr>
        <td>Extras:</td>
        <td></td><td>30(b: <%= if !(@awayinnings==nil) then @awayinnings.byes end %>,lb: <%= if !(@awayinnings==nil) then @awayinnings.legbyes end %>,w:<%= awaywides%> ,nb:<%= awaynoballs%> ,p:<%= if !(@awayinnings==nil) then @awayinnings.penalties end %>)</td>
      </tr>
      <tr>
        <td><strong>Total:</strong></td>
        <td></td><td><%= awayscorebattedruns + awayscorebowledextras + awayscoremiscextras%><%= if (awaywicketsconceded < 10) then '/' end %><%=if (awaywicketsconceded < 10) then awaywicketsconceded end %> (<%= awayovers%> Overs, RR: <%= ((awayscorebattedruns + awayscorebowledextras + awayscoremiscextras).to_f / awayovers.to_f).round(2)%>)</td>
      </tr>
    </tbody>
  </table>
  <br>
  <table class="center">
    <thead>
      <tr>
        <th><%= I18n.t('.matches.scorecard.bowler') %></th>
        <th><%= I18n.t('.matches.scorecard.overs') %></th>
        <th><%= I18n.t('.matches.scorecard.maidens') %></th>
        <th><%= I18n.t('.matches.scorecard.runs') %></th>
        <th><%= I18n.t('.matches.scorecard.wickets') %></th>
        <th><%= I18n.t('.matches.scorecard.econ') %></th>
        <th><%= I18n.t('.matches.scorecard.no_balls') %></th>
        <th><%= I18n.t('.matches.scorecard.wides') %></th>
        <th><%= link_to I18n.t('.matches.add_innings'), new_bowling_innings_path %></th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @awaybowlinginnings.each do |bowling_innings| %>
        <tr>
          <td><%= bowling_innings.Player.name %></td>
          <td><%= bowling_innings.overs %></td>
          <td><%= bowling_innings.maidens %></td>
          <td><%= bowling_innings.runs %></td>
          <td><%= bowling_innings.wickets %></td>
          <td><%= (bowling_innings.runs.to_f / bowling_innings.overs.to_f).round(2) %></td>
          <td><%= bowling_innings.no_balls %></td>
          <td><%= bowling_innings.wides %></td>
          <td><%= link_to 'Edit', edit_bowling_innings_path(bowling_innings) %></td>
          <td><%= link_to 'Destroy', bowling_innings, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

<p>
  <strong>Date:</strong>
  <%= @match.date %>
</p>

<p>
  <strong>Stadium:</strong>
  <%= @match.stadium %>
</p>

<%= link_to 'Edit', edit_match_path(@match) %> |
<%= link_to 'Back', matches_path %> |
Accidentally added a wrong innings? <%= link_to 'Click Here', match_innings_index_path(@match) %>
